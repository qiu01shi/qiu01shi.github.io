---
layout: post
title: 07 实现文章定时计算
date: 2024-06-28 10:27 +0800
categories: [Blogging,TJU-news]
author: <author_id>  
---

## 定时计算

<img src="../media/2024-06-28-%E5%AE%9E%E7%8E%B0%E6%96%87%E7%AB%A0%E5%AE%9A%E6%97%B6%E8%AE%A1%E7%AE%97/image-20240628110316443.png" alt="image-20240628110316443" style="zoom:40%;" />

- 根据文章的行为（点赞、评论、阅读、收藏）计算文章的分值，利用定时任务每天完成一次计算；

- 把分值较大的文章数据存入到 `redis` 中；

- `App` 端用户查询文章列表的时候，优先从 `redis` 中查询热度较高的文章数据。



### 定时任务框架 xxl-job

`spring` 传统的定时任务 `@Scheduled`，但是这样存在这一些问题 ：

- 做集群任务的重复执行问题；

- `cron` 表达式定义在代码之中，修改不方便；

- 定时任务失败了，无法重试也没有统计；

- 如果任务量过大，不能有效的分片执行；

解决这些问题的方案为：`xxl-job` 分布式任务调度框架。



## 热点文章定时计算

### 需求分析

为每个频道缓存热度较高的 `30` 条文章优先展示；





















