---
layout: post
title: 08 文章的实时计算
date: 2024-06-28 21:06 +0800
categories: [Blogging,TJU-news]
author: <author_id>  
---

## 定时计算与实时计算



<img src="../media/2024-06-28-%E6%96%87%E7%AB%A0%E7%9A%84%E5%AE%9E%E6%97%B6%E8%AE%A1%E7%AE%97/image-20240628210957817.png" alt="image-20240628210957817" style="zoom:40%;" />

## app 端热点文章计算

### 流程展示

<img src="../media/2024-06-28-%E6%96%87%E7%AB%A0%E7%9A%84%E5%AE%9E%E6%97%B6%E8%AE%A1%E7%AE%97/image-20240620213018266.png" alt="image-20240620213018266" style="zoom:40%;" />



### 用户行为发送消息

用户行为（阅读量，评论，点赞，收藏）发送消息，以阅读和点赞为例；

①：在 `TJU-campus-behavior` 微服务中集成 `kafka` 生产者配置

```yaml
spring:
  application:
    name: leadnews-behavior
  kafka:
    bootstrap-servers: xxxx:9092
    producer:
      retries: 10
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
```

②：修改 `ApLikesBehaviorServiceImpl` 新增发送消息

定义消息发送封装类：`UpdateArticleMess`
